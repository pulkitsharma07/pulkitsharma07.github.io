<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Using Jekyll and Github Pages (in 2017) - Pulkit Sharma</title>
<meta name="description" content="After reading numerous posts online for using Jekyll and Github Pages together, I faced couple of issues. Lets take a look and see how I addressed some of them.">


  <meta name="author" content="Pulkit Sharma">
  
  <meta property="article:author" content="Pulkit Sharma">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Pulkit Sharma">
<meta property="og:title" content="Using Jekyll and Github Pages (in 2017)">
<meta property="og:url" content="https://pulkit.cc/2017/09/23/using-jekyll-and-github-pages/">


  <meta property="og:description" content="After reading numerous posts online for using Jekyll and Github Pages together, I faced couple of issues. Lets take a look and see how I addressed some of them.">







  <meta property="article:published_time" content="2017-09-23T13:13:34+00:00">






<link rel="canonical" href="https://pulkit.cc/2017/09/23/using-jekyll-and-github-pages/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "https://pulkit.cc/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Pulkit Sharma Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Pulkit Sharma
          <span class="site-subtitle">Personal Opinions</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/">Categories</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Using Jekyll and Github Pages (in 2017)">
    <meta itemprop="description" content="  After reading numerous posts online for using Jekyll and Github Pages together, I faced couple of issues. Lets take a look and see how I addressed some of them.">
    <meta itemprop="datePublished" content="2017-09-23T13:13:34+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Using Jekyll and Github Pages (in 2017)
</h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          7 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <blockquote>
  <p>After reading numerous posts online for using Jekyll and Github Pages together, I faced couple of issues. Lets take a look and see how I addressed some of them.</p>
</blockquote>

<ul>
  <li>Jekyll 3 now recommends using Gem-based themes. I was not able to find themes other than the ones mentioned <a href="https://github.com/planetjekyll/awesome-jekyll-themes">here</a>.</li>
  <li>The ones <a href="https://pages.github.com/themes/">supported</a> by Github are not exactly blog like.</li>
</ul>

<p>After spending considerable amount of time looking for a perfect theme (And giving up numerous times). I decided to go with the <code class="language-plaintext highlighter-rouge">whiteglass</code> theme.</p>

<p>I cloned the repo and had the blog running locally, it was time to push to my <code class="language-plaintext highlighter-rouge">.github.io</code> repo. After, refreshing 3-4 times all I was staring at was a blank white screen. Soon, I got a mail from Github regarding a build warning.</p>

<p><em>You are attempting to use a Jekyll theme, “jekyll-whiteglass”, which is not supported by GitHub Pages</em></p>

<h2 id="the-fix">The Fix</h2>

<p>Instead of serving a Jekyll Project directly from the <code class="language-plaintext highlighter-rouge">master</code> branch of the <code class="language-plaintext highlighter-rouge">github.io</code> repository, we can instead serve the static files generated from the <code class="language-plaintext highlighter-rouge">jekyll build</code> command, i.e. the contents of the <code class="language-plaintext highlighter-rouge">_site</code> directory.
This way, we will remove dependency on Github Pages to build the Jekyll Project, instead it will only serve the static pages.</p>

<p>Since, the <code class="language-plaintext highlighter-rouge">master</code> branch will have the “built” website, where should we store the actual Jekyll Project ?</p>

<p>In my case I have stored it in the <code class="language-plaintext highlighter-rouge">development</code> branch inside the same repository. I will work on the blog in this branch and will push the built website to the <code class="language-plaintext highlighter-rouge">master</code> branch. I have seen some repositories where people have written Travis jobs to do this exact thing. I feel that is an overkill, a slow process and downright exploitation of a free service. Please correct me if I am wrong.</p>

<p>I have written a small shell script which will build the website and push the changes to the <code class="language-plaintext highlighter-rouge">master</code> branch. Here it is:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#! /bin/sh</span>

<span class="nv">BUILD_DIR</span><span class="o">=</span><span class="s2">"./_site"</span>
<span class="nv">TMP_DIR</span><span class="o">=</span><span class="s2">"/tmp/jekyll_build"</span>
<span class="nv">CURRENT_BRANCH</span><span class="o">=</span><span class="si">$(</span>git rev-parse <span class="nt">--abbrev-ref</span> HEAD<span class="si">)</span>

<span class="c"># Delete old build files if any</span>
<span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$BUILD_DIR</span>

<span class="c"># Build</span>
bundle <span class="nb">exec </span>jekyll build

<span class="c"># If Build succeeds</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$BUILD_DIR</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"JEKYLL: BUILD SUCCESS"</span>
    <span class="nb">rm</span> <span class="nt">-r</span> <span class="nv">$TMP_DIR</span>

    <span class="c"># Move BUILD_DIR to /tmp</span>
    <span class="nb">mv</span> <span class="nv">$BUILD_DIR</span> <span class="nv">$TMP_DIR</span>

    <span class="c"># Change branch to master</span>
    <span class="k">if </span>git checkout master<span class="p">;</span> <span class="k">then
      </span><span class="nb">echo</span> <span class="s2">"SUCCESSFULLY SWITCHED TO MASTER"</span>

      <span class="c"># Cleanup</span>
      <span class="nb">ls</span> | xargs <span class="nb">rm</span> <span class="nt">-r</span>

      <span class="c"># Get the build</span>
      <span class="nb">mv</span> <span class="nv">$TMP_DIR</span>/<span class="k">*</span> <span class="nb">.</span>

      <span class="c"># Commit</span>
      git add <span class="nb">.</span>
      git commit <span class="nt">-m</span> <span class="s2">"Deploy </span><span class="si">$(</span><span class="nb">date</span><span class="si">)</span><span class="s2">"</span>
      <span class="k">if </span>git push origin master<span class="p">;</span> <span class="k">then
        </span><span class="nb">echo</span> <span class="s2">"DEPLOYED SUCCESSFULLY !"</span>
        <span class="nb">echo</span> <span class="si">$(</span><span class="nb">basename</span> <span class="si">$(</span>git remote show <span class="nt">-n</span> origin | <span class="nb">grep </span>Fetch | <span class="nb">cut</span> <span class="nt">-d</span>: <span class="nt">-f2-</span><span class="si">))</span>
      <span class="k">else
        </span><span class="nb">echo</span> <span class="s2">"DEPLOY FAILED !"</span>
      <span class="k">fi
    else
      </span><span class="nb">echo</span> <span class="s2">"CANNOT SWITCH BRANCH, ABORTING"</span>
    <span class="k">fi

else
    </span><span class="nb">echo</span> <span class="s2">"JEKYLL: BUILD FAILURE"</span>
<span class="k">fi

</span>git checkout <span class="nv">$CURRENT_BRANCH</span>
</code></pre></div></div>
<p>This script lives in the <code class="language-plaintext highlighter-rouge">development</code> branch.</p>

<p>After I am done doing my changes to the blog. I push them to the <code class="language-plaintext highlighter-rouge">development</code> branch, and then do <code class="language-plaintext highlighter-rouge">./deploy</code>. The script will then make a new commit on <code class="language-plaintext highlighter-rouge">master</code> having your latest masterpiece.</p>

<h2 id="why-i-dont-like-the-gem-based-themes">Why I don’t like the gem based themes.</h2>

<p>I have added the <code class="language-plaintext highlighter-rouge">deploy</code> script as a post-commit hook, but unfortunately some changes do not require a commit.</p>

<p>This is because most of the theme related code is now inside the gem’s directory (i.e. not inside my git repo). So, say If I want to change the Google Analytics tracking script, then I’ll need to do the changes in the <code class="language-plaintext highlighter-rouge">google_analytics.html</code> file. Since, this file is inside the gem’s directory (in my case at <code class="language-plaintext highlighter-rouge">/Users/pulkit/.rvm/gems/ruby-2.2.5/gems/jekyll-whiteglass-1.3.0/_includes/</code>), I cannot make a commit on <code class="language-plaintext highlighter-rouge">development</code> to reflect this change.</p>

<p>Gem based themes are good for people who are new to Jekyll and do not wish to modify the themes they use. Since, most of the theme related code is now present in some other directory, users will not be overwhelmed from the directory structure when they do <code class="language-plaintext highlighter-rouge">jekyll new</code>.
But sooner or later, you’ll need to make some changes to the theme (changing the font size for example). Doing those changes in some other directory and not inside version control is pretty cumbersome and will hurt in the future.</p>

<p><strong>UPDATE</strong>: Found out this <a href="https://jekyllrb.com/docs/themes/#converting-gem-based-themes-to-regular-themes">https://jekyllrb.com/docs/themes/#converting-gem-based-themes-to-regular-themes</a>, this will make your git repo to have all the code ! But then, what is the point of gem-based themes ?</p>

<p><em>Discussion on <a href="https://news.ycombinator.com/item?id=15354908">HackerNews</a>.</em></p>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2017-09-23T13:13:34+00:00">September 23, 2017</time></p>


      </footer>

      

      
  <nav class="pagination">
    
      <a href="#" class="pagination--pager disabled">Previous</a>
    
    
      <a href="/2018/08/08/managing-shell-commands/" class="pagination--pager" title="Managing Shell Commands through Vim
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2023 Pulkit Sharma. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
